<smartForm:SmartForm
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:smartForm="sap.ui.comp.smartform"
    xmlns:smartField="sap.ui.comp.smartfield"
    id="HeaderSmartForm"
    editTogglable="false"
    validationMode="Async"
    editable="true"
    visible="{ViewControl>/Sections/IsVisible}"
    busyIndicatorDelay="0"
>
    <smartForm:layout>
        <smartForm:Layout
            columnsL="3"
            columnsM="3"
        />
    </smartForm:layout>
    <smartForm:Group>
        <smartForm:GroupElement>
            <smartForm:label>
                <Label text="Report Status" />
            </smartForm:label>
            <HBox alignItems="Center">
                <!-- Select shown when status is editable (1, 2, 6) - only allows selection of 1, 2, 6 -->
                <Select
                    id="ReportStatusSelect"
                    selectedKey="{ReportStatus}"
                    visible="{ViewControl>/SmartField/ReportStatus}"
                    forceSelection="false"
                >
                    <core:Item key="1" text="CREATE (1)" />
                    <core:Item key="5" text="REJECTED (5)" />
                    <core:Item key="6" text="DELETED (6)" />
                </Select>
                <!-- Text shown when status is not editable (3, 4, 5) - displays current status -->
                <Text 
                    id="ReportStatusText"
                    text="{path: 'ReportStatus', formatter: '.formatStatusText'}"
                    visible="{= !${ViewControl>/SmartField/ReportStatus} }"
                />
                <core:Icon 
                    src="{path: 'ReportStatus', formatter: '.formatStatusIcon'}" 
                    color="{path: 'ReportStatus', formatter: '.formatStatusColor'}"
                    class="sapUiTinyMarginBegin" />
            </HBox>
        </smartForm:GroupElement>
        <smartForm:GroupElement>
            <smartField:SmartField
                editable="{ViewControl>/SmartField/MainContractNo}"
                id="MainContractNo"
                value="{MainContractNo}"
            />
        </smartForm:GroupElement>
        <smartForm:GroupElement>
            <smartField:SmartField
                editable="{ViewControl>/SmartField/ProjectStatusDescr}"
                id="ProjectStatusDescr"
                value="{ProjectStatusDescr}"
            />
        </smartForm:GroupElement>
        <smartForm:GroupElement>
            <smartField:SmartField
                editable="{ViewControl>/SmartField/ProjectNumber}"
                id="ProjectNumber"
                value="{ProjectExternalID}"
            />
        </smartForm:GroupElement>
        <smartForm:GroupElement>
            <smartField:SmartField
                editable="{ViewControl>/SmartField/ProjectManagerDescr}"
                id="ProjectManagerDescr"
                value="{ProjectManagerDescr}"
            />
        </smartForm:GroupElement>
        <smartForm:GroupElement>
            <smartField:SmartField
                editable="{ViewControl>/SmartField/CustomerPurchaseOrderDate}"
                id="CustomerPurchaseOrderDate"
                value="{CustomerPurchaseOrderDate}"
            />
        </smartForm:GroupElement>
        <smartForm:GroupElement>
            <smartField:SmartField
                editable="{ViewControl>/SmartField/RevisedCompletionDate}"
                id="RevisedCompletionDate"
                value="{RevisedCompletionDate}"
                change="onDateChange"
            />
        </smartForm:GroupElement>
        <smartForm:GroupElement>
            <smartField:SmartField
                editable="{ViewControl>/SmartField/ReportingMonth}"
                id="ReportingMonth_2"
                value="{
path: 'ReportingMonth',
type: 'sap.ui.model.odata.type.DateTime',
formatOptions: {
'UTC': true,
pattern: 'yyyy MMMM'
}
}"
            />
        </smartForm:GroupElement>
        <smartForm:GroupElement elementForLabel="MainContractTenderValue">
            <smartForm:label>
                <Label text="Main Contract Tender Value" />
            </smartForm:label>
            <HBox>
                <smartField:SmartField
                    id="MainContractTenderValue"
                    value="{MainContractTenderValue}"
                    editable="{ViewControl>/SmartField/MainContractTenderValue}"
                    width="15rem"
                    change="onCurrencyInputChange"
                />
                <Text
                    text="{TransactionCurrency}"
                />
            </HBox>
        </smartForm:GroupElement>
        <smartForm:GroupElement>
            <smartForm:label>
                <Label text="Turnkey Tender Value" />
            </smartForm:label>
            <HBox>
                <smartField:SmartField
                    editable="{ViewControl>/SmartField/TurnkeyTenderValue}"
                    id="TurnkeyTenderValue"
                    value="{TurnkeyTenderValue}"
                    width="15rem"
                    change="onCurrencyInputChange"
                />
                <Text
                    text="{TransactionCurrency}"
                />
            </HBox>
        </smartForm:GroupElement>
        <smartForm:GroupElement>
            <smartForm:label>
                <Label text="Tender Margin On Revenue" />
            </smartForm:label>
            <HBox>
                <smartField:SmartField
                    editable="{ViewControl>/SmartField/TenderMarginOnRevenue}"
                    id="TenderMarginOnRevenue"
                    value="{TenderMarginOnRevenue}"
                    width="15rem"
                    change="onCurrencyInputChange"
                />
                <Text
                    text="{TransactionCurrency}"
                />
            </HBox>
        </smartForm:GroupElement>
        <smartForm:GroupElement>
            <smartForm:label>
                <Label text="Joinery Tender Value" />
            </smartForm:label>
            <HBox>
                <smartField:SmartField
                    editable="{ViewControl>/SmartField/JoineryTenderValue}"
                    id="JoineryTenderValue"
                    value="{JoineryTenderValue}"
                    width="15rem"
                    change="onCurrencyInputChange"
                />
                <Text
                    text="{TransactionCurrency}"
                />
            </HBox>
        </smartForm:GroupElement>

        <smartForm:GroupElement>
            <smartField:SmartField
                editable="{ViewControl>/SmartField/TenderMarginCombined_F}"
                id="TenderMarginCombined_F"
                value="{TenderMarginCombined_F}"
            />
        </smartForm:GroupElement>
        <smartForm:GroupElement>
            <smartField:SmartField
                editable="{ViewControl>/SmartField/TenderMarginTurnkey_F}"
                id="TenderMarginTurnkey_F"
                value="{TenderMarginTurnkey_F}"
            />
        </smartForm:GroupElement>
        <smartForm:GroupElement>
            <smartField:SmartField
                editable="{ViewControl>/SmartField/TenderMarginJoinery_F}"
                id="TenderMarginJoinery_F"
                value="{TenderMarginJoinery_F}"
            />
        </smartForm:GroupElement>
        <smartForm:GroupElement>
            <smartField:SmartField
                editable="{ViewControl>/SmartField/Remarks}"
                id="Remarks"
                value="{Remarks}"
            />
        </smartForm:GroupElement>
    </smartForm:Group>
    <smartForm:Group>
        <smartForm:GroupElement>
            <smartField:SmartField
                editable="{ViewControl>/SmartField/ReportNumber}"
                id="ReportNumber"
                value="{ReportNumber}"
            />
        </smartForm:GroupElement>
        <smartForm:GroupElement>
            <smartField:SmartField
                editable="{ViewControl>/SmartField/ContractName}"
                id="ContractName"
                value="{ContractName}"
            />
        </smartForm:GroupElement>
        <smartForm:GroupElement>
            <smartField:SmartField
                editable="{ViewControl>/SmartField/ClientName}"
                id="ClientName"
                value="{ClientName}"
            />
        </smartForm:GroupElement>
        <smartForm:GroupElement>
            <smartField:SmartField
                editable="{ViewControl>/SmartField/ProjectName}"
                id="ProjectName"
                value="{ProjectName}"
            />
        </smartForm:GroupElement>
        <smartForm:GroupElement>
            <smartField:SmartField
                editable="{ViewControl>/SmartField/ProjectQSDescr}"
                id="ProjectQSDescr"
                value="{ProjectQSDescr}"
            />
        </smartForm:GroupElement>
        <smartForm:GroupElement>
            <smartField:SmartField
                editable="{ViewControl>/SmartField/RequestedDeliveryDate}"
                id="RequestedDeliveryDate"
                value="{RequestedDeliveryDate}"
                change="onDateChange"
            />
        </smartForm:GroupElement>
        <smartForm:GroupElement>
            <smartField:SmartField
                editable="{ViewControl>/SmartField/DelayInDays}"
                id="DelayInDays"
                value="{DelayInDays}"
            />
        </smartForm:GroupElement>
        <smartForm:GroupElement>
            <smartField:SmartField
                editable="{ViewControl>/SmartField/ValuationDate}"
                id="ValuationDate"
                value="{ValuationDate}"
            />
        </smartForm:GroupElement>
        <smartForm:GroupElement>
            <smartForm:label>
                <Label text="Main Contract Current Sell" />
            </smartForm:label>
            <HBox>
                <smartField:SmartField
                    editable="{ViewControl>/SmartField/MainContractCurrentSell}"
                    id="MainContractCurrentSell"
                    value="{MainContractCurrentSell}"
                    width="15rem"
                    change="onCurrencyInputChange"
                />
                <Text
                    text="{TransactionCurrency}"
                />
            </HBox>
        </smartForm:GroupElement>
        <smartForm:GroupElement>
            <smartForm:label>
                <Label text="Approved Variation Current Sell" />
            </smartForm:label>
            <HBox>
                <smartField:SmartField
                    editable="{ViewControl>/SmartField/AprvVariationCurrentSell}"
                    id="AprvVariationCurrentSell"
                    value="{AprvVariationCurrentSell}"
                    changeModelValue=".calcProjFinalAccountCurrentSell"
                    change="onCurrencyInputChange"
                    width="15rem"
                />
                
                <Text
                    text="{TransactionCurrency}"
                />
            </HBox>
        </smartForm:GroupElement>
        <smartForm:GroupElement>
            <smartForm:label>
                <Label text="Unapproved Variation Current Sell" />
            </smartForm:label>
            <HBox>
                <smartField:SmartField
                editable="{ViewControl>/SmartField/UnaprvVariationCurrentSell}"
                id="UnaprvVariationCurrentSell"
                value="{UnaprvVariationCurrentSell}"
                changeModelValue=".calcProjFinalAccountCurrentSell"
                change="onCurrencyInputChange"
                width="15rem"
            />
                
                <Text
                    text="{TransactionCurrency}"
                />
            </HBox>
        </smartForm:GroupElement>
        <smartForm:GroupElement>
            <smartForm:label>
                <Label text="Project Final Account Current Selling" />
            </smartForm:label>
            <HBox>
                <smartField:SmartField
                editable="{ViewControl>/SmartField/ProjFinalAccountCurrentSell}"
                id="ProjFinalAccountCurrentSell"
                value="{ProjFinalAccountCurrentSell}"
                change="onCurrencyInputChange"
                width="15rem"
            />
                
                <Text
                    text="{TransactionCurrency}"
                />
            </HBox>
        </smartForm:GroupElement>
        <smartForm:GroupElement>
            <smartForm:label>
                <Label text="Potential Final Account Current Sell" />
            </smartForm:label>
            <HBox>
                <smartField:SmartField
                editable="{ViewControl>/SmartField/PotFinalAccountCurrentSell}"
                id="PotFinalAccountCurrentSell"
                value="{PotFinalAccountCurrentSell}"
                change="onCurrencyInputChange"
                width="15rem"
            />
                
                <Text
                    text="{TransactionCurrency}"
                />
            </HBox>
        </smartForm:GroupElement>
        <!-- <smartForm:GroupElement>
            <smartField:SmartField 
            editable="{false}"    
            id="TransactionCurrency"
                value="{TransactionCurrency}"
            />
        </smartForm:GroupElement> -->
    </smartForm:Group>
    <smartForm:Group />
</smartForm:SmartForm>
