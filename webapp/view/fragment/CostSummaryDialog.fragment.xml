<core:FragmentDefinition
    xmlns:core="sap.ui.core"
    xmlns:table="sap.ui.table"
    xmlns="sap.m"
>
    <Dialog
        title="Cost Summary View"
        contentWidth="100%"
        contentHeight="100%" 
        resizable="true"
        draggable="true"
        stretch="true"
    >
        <content>
            <VBox width="100%" height="100%">
            <table:Table
                id="CostSummaryDialogTable"
                selectionMode="None"
                enableColumnFreeze="true"
                fixedColumnCount="3"
                fixedBottomRowCount="1"
                visibleRowCount="20"
                enableColumnReordering="true"
                columnHeaderHeight="auto"
                class="mainTable sapUiSizeCompact"
            
            >
                <table:rowSettingsTemplate>
                    <table:RowSettings
                        highlight="{= 
                            ${HierarchyLevel}===2 ? 'Information' : 
                            ${HierarchyLevel}===3 ? 'Warning' : 
                            ${HierarchyLevel}===4||${HierarchyLevel}===5 ? 'Success' : 
                            'None'
                        }"
                    />
                </table:rowSettingsTemplate>

                <table:columns>
                    <table:Column>
                        <table:label>
                            <Label
                                text="WBS Level 2"
                                textAlign="Left"
                            />
                        </table:label>
                        <table:template>
                            <HBox>
                                <Text
                                    text="{WBSLevel2Descr}"
                                    wrapping="false"
                                    class="emphasizedColumn"
                                    visible="{= ${HierarchyLevel} !== 5 &amp;&amp; ${HierarchyLevel} !== 6 &amp;&amp; ${HierarchyLevel} !== 7}"
                                />
                                <Text
                                    text="Sub Total:-"
                                    wrapping="false"
                                    textAlign="Right"
                                    class="hierarchyLevel6"
                                    visible="{= ${HierarchyLevel} === 6}"
                                />
                                <Text
                                    text="Total:-"
                                    wrapping="false"
                                    textAlign="Right"
                                    class="hierarchyLevel7"
                                    visible="{= ${HierarchyLevel} === 7}"
                                />
                            </HBox>
                        </table:template>
                    </table:Column>
                    <table:Column>
                        <table:label>
                            <Label
                                text="WBS Level 3"
                                textAlign="Left"
                            />
                        </table:label>
                        <table:template>
                            <HBox>
                                <Text
                                    text="{WBSLevel3Descr}"
                                    wrapping="false"
                                    class="emphasizedColumn"
                                    visible="{= ${HierarchyLevel} !== 6 &amp;&amp; ${HierarchyLevel} !== 7}"
                                />
                                <Text
                                    text="{WBSLevel3Descr}"
                                    wrapping="false"
                                    class="emphasizedColumn hierarchyLevel6"
                                    visible="{= ${HierarchyLevel} === 6}"
                                />
                                <Text
                                    text="{WBSLevel3Descr}"
                                    wrapping="false"
                                    class="emphasizedColumn hierarchyLevel7"
                                    visible="{= ${HierarchyLevel} === 7}"
                                />
                            </HBox>
                        </table:template>
                    </table:Column>
                    <table:Column>
                        <table:label>
                            <Label
                                text="WBS Level 4"
                                textAlign="Left"
                            />
                        </table:label>
                        <table:template>
                            <HBox>
                                <Text
                                    text="{WBSLevel4Descr}"
                                    wrapping="false"
                                    class="emphasizedColumn"
                                    visible="{= ${HierarchyLevel} !== 6 &amp;&amp; ${HierarchyLevel} !== 7}"
                                />
                                <Text
                                    text="{WBSLevel4Descr}"
                                    wrapping="false"
                                    class="emphasizedColumn hierarchyLevel6"
                                    visible="{= ${HierarchyLevel} === 6}"
                                />
                                <Text
                                    text="{WBSLevel4Descr}"
                                    wrapping="false"
                                    class="emphasizedColumn hierarchyLevel7"
                                    visible="{= ${HierarchyLevel} === 7}"
                                />
                            </HBox>
                        </table:template>
                    </table:Column>
                    <table:Column width="10rem">
                        <table:label>
                            <Label
                                text="Tender Cost"
                                textAlign="Right"
                            />
                        </table:label>
                        <table:template>
                            <HBox justifyContent="End">
                                <Text 
                                    text="{ parts: ['TenderCost', 'TransactionCurrency'], type: 'sap.ui.model.type.Currency'}" 
                                    wrapping="false"
                                    class="amount-field"
                                    textAlign="End"
                                    visible="{= ${HierarchyLevel} !== 6 &amp;&amp; ${HierarchyLevel} !== 7}"
                                />
                                <Text 
                                    text="{ parts: ['TenderCost', 'TransactionCurrency'], type: 'sap.ui.model.type.Currency'}" 
                                    wrapping="false"
                                    class="hierarchyLevel6 amount-field"
                                    textAlign="End"
                                    visible="{= ${HierarchyLevel} === 6}"
                                />
                                <Text 
                                    text="{ parts: ['TenderCost', 'TransactionCurrency'], type: 'sap.ui.model.type.Currency'}" 
                                    wrapping="false"
                                    class="hierarchyLevel7 amount-field"
                                    textAlign="End"
                                    visible="{= ${HierarchyLevel} === 7}"
                                />
                            </HBox>
                        </table:template>
                    </table:Column>
                    <table:Column width="10rem">
                        <table:label>
                            <Label
                                text="Revised Budget"
                                textAlign="Right"
                            />
                        </table:label>
                        <table:template>
                            <HBox justifyContent="End">
                                <Text 
                                    text="{ parts: ['RevisedBudget', 'TransactionCurrency'], type: 'sap.ui.model.type.Currency'}" 
                                    wrapping="false"
                                    class="amount-field"
                                    textAlign="End"
                                    visible="{= ${HierarchyLevel} !== 6 &amp;&amp; ${HierarchyLevel} !== 7}"
                                />
                                <Text 
                                    text="{ parts: ['RevisedBudget', 'TransactionCurrency'], type: 'sap.ui.model.type.Currency'}" 
                                    wrapping="false"
                                    class="hierarchyLevel6 amount-field"
                                    textAlign="End"
                                    visible="{= ${HierarchyLevel} === 6}"
                                />
                                <Text 
                                    text="{ parts: ['RevisedBudget', 'TransactionCurrency'], type: 'sap.ui.model.type.Currency'}" 
                                    wrapping="false"
                                    class="hierarchyLevel7 amount-field"
                                    textAlign="End"
                                    visible="{= ${HierarchyLevel} === 7}"
                                />
                            </HBox>
                        </table:template>
                    </table:Column>
                    <table:Column width="10rem">
                        <table:label>
                            <Label
                                text="Pot. Final Account Cost"
                                textAlign="Right"
                            />
                        </table:label>
                        <table:template>
                            <HBox justifyContent="End">
                                <Text 
                                    text="{ parts: ['PotentialFinalAccountCost', 'TransactionCurrency'], type: 'sap.ui.model.type.Currency'}" 
                                    wrapping="false"
                                    class="amount-field"
                                    textAlign="End"
                                    visible="{= ${ViewControl>/Mode/IsEditable} === false &amp;&amp; ${HierarchyLevel} !== 6 &amp;&amp; ${HierarchyLevel} !== 7}"
                                />
                                <Text 
                                    text="{ parts: ['PotentialFinalAccountCost', 'TransactionCurrency'], type: 'sap.ui.model.type.Currency'}" 
                                    wrapping="false"
                                    class="hierarchyLevel6 amount-field"
                                    textAlign="End"
                                    visible="{= ${HierarchyLevel} === 6}"
                                />
                                <Text 
                                    text="{ parts: ['PotentialFinalAccountCost', 'TransactionCurrency'], type: 'sap.ui.model.type.Currency'}" 
                                    wrapping="false"
                                    class="hierarchyLevel7 amount-field"
                                    textAlign="End"
                                    visible="{= ${HierarchyLevel} === 7}"
                                />
                                <Input
                                    value="{ parts: ['PotentialFinalAccountCost', 'TransactionCurrency'], type: 'sap.ui.model.type.Currency', formatOptions: {showMeasure: false}}"
                                    visible="{= ${ViewControl>/Mode/IsEditable} === true &amp;&amp; ${HierarchyLevel} !== 6 &amp;&amp; ${HierarchyLevel} !== 7}"
                                    width="auto"
                                    class="amount-field"
                                    textAlign="End"
                                    change=".onCurrencyInputChange"
                                />
                            </HBox>
                        </table:template>
                    </table:Column>
                    <table:Column width="10rem">
                        <table:label>
                            <Label
                                text="Actual Cost PO"
                                textAlign="Right"
                            />
                        </table:label>
                        <table:template>
                            <HBox justifyContent="End">
                                <Text 
                                    text="{ parts: ['ActualCostPO', 'TransactionCurrency'], type: 'sap.ui.model.type.Currency'}" 
                                    wrapping="false"
                                    class="amount-field"
                                    textAlign="End"
                                    visible="{= ${HierarchyLevel} !== 6 &amp;&amp; ${HierarchyLevel} !== 7}"
                                />
                                <Text 
                                    text="{ parts: ['ActualCostPO', 'TransactionCurrency'], type: 'sap.ui.model.type.Currency'}" 
                                    wrapping="false"
                                    class="hierarchyLevel6 amount-field"
                                    textAlign="End"
                                    visible="{= ${HierarchyLevel} === 6}"
                                />
                                <Text 
                                    text="{ parts: ['ActualCostPO', 'TransactionCurrency'], type: 'sap.ui.model.type.Currency'}" 
                                    wrapping="false"
                                    class="hierarchyLevel7 amount-field"
                                    textAlign="End"
                                    visible="{= ${HierarchyLevel} === 7}"
                                />
                            </HBox>
                        </table:template>
                    </table:Column>
                    <table:Column width="10rem">
                        <table:label>
                            <Label
                                text="Actual Cost SO"
                                textAlign="Right"
                            />
                        </table:label>
                        <table:template>
                            <HBox justifyContent="End">
                                <Text 
                                    text="{ parts: ['ActualCostSO', 'TransactionCurrency'], type: 'sap.ui.model.type.Currency'}" 
                                    wrapping="false"
                                    class="amount-field"
                                    textAlign="End"
                                    visible="{= ${HierarchyLevel} !== 6 &amp;&amp; ${HierarchyLevel} !== 7}"
                                />
                                <Text 
                                    text="{ parts: ['ActualCostSO', 'TransactionCurrency'], type: 'sap.ui.model.type.Currency'}" 
                                    wrapping="false"
                                    class="hierarchyLevel6 amount-field"
                                    textAlign="End"
                                    visible="{= ${HierarchyLevel} === 6}"
                                />
                                <Text 
                                    text="{ parts: ['ActualCostSO', 'TransactionCurrency'], type: 'sap.ui.model.type.Currency'}" 
                                    wrapping="false"
                                    class="hierarchyLevel7 amount-field"
                                    textAlign="End"
                                    visible="{= ${HierarchyLevel} === 7}"
                                />
                            </HBox>
                        </table:template>
                    </table:Column>
                    <table:Column width="10rem">
                        <table:label>
                            <Label
                                text="Committed Cost PO"
                                textAlign="Right"
                            />
                        </table:label>
                        <table:template>
                            <HBox justifyContent="End">
                                <Text 
                                    text="{ parts: ['CommitedCostPO', 'TransactionCurrency'], type: 'sap.ui.model.type.Currency'}" 
                                    wrapping="false"
                                    class="amount-field"
                                    textAlign="End"
                                    visible="{= ${HierarchyLevel} !== 6 &amp;&amp; ${HierarchyLevel} !== 7}"
                                />
                                <Text 
                                    text="{ parts: ['CommitedCostPO', 'TransactionCurrency'], type: 'sap.ui.model.type.Currency'}" 
                                    wrapping="false"
                                    class="hierarchyLevel6 amount-field"
                                    textAlign="End"
                                    visible="{= ${HierarchyLevel} === 6}"
                                />
                                <Text 
                                    text="{ parts: ['CommitedCostPO', 'TransactionCurrency'], type: 'sap.ui.model.type.Currency'}" 
                                    wrapping="false"
                                    class="hierarchyLevel7 amount-field"
                                    textAlign="End"
                                    visible="{= ${HierarchyLevel} === 7}"
                                />
                            </HBox>
                        </table:template>
                    </table:Column>
                    <table:Column width="10rem">
                        <table:label>
                            <Label
                                text="Total PO Cost"
                                textAlign="Right"
                            />
                        </table:label>
                        <table:template>
                            <HBox justifyContent="End">
                                <Text 
                                    text="{ parts: ['TotalPOCost', 'TransactionCurrency'], type: 'sap.ui.model.type.Currency'}" 
                                    wrapping="false"
                                    class="amount-field"
                                    textAlign="End"
                                    visible="{= ${HierarchyLevel} !== 6 &amp;&amp; ${HierarchyLevel} !== 7}"
                                />
                                <Text 
                                    text="{ parts: ['TotalPOCost', 'TransactionCurrency'], type: 'sap.ui.model.type.Currency'}" 
                                    wrapping="false"
                                    class="hierarchyLevel6 amount-field"
                                    textAlign="End"
                                    visible="{= ${HierarchyLevel} === 6}"
                                />
                                <Text 
                                    text="{ parts: ['TotalPOCost', 'TransactionCurrency'], type: 'sap.ui.model.type.Currency'}" 
                                    wrapping="false"
                                    class="hierarchyLevel7 amount-field"
                                    textAlign="End"
                                    visible="{= ${HierarchyLevel} === 7}"
                                />
                            </HBox>
                        </table:template>
                    </table:Column>
                    <table:Column width="10rem">
                        <table:label>
                            <Label
                                text="Cost to Complete"
                                textAlign="Right"
                            />
                        </table:label>
                        <table:template>
                            <HBox justifyContent="End">
                                <Text 
                                    text="{ parts: ['CostToComplete', 'TransactionCurrency'], type: 'sap.ui.model.type.Currency'}" 
                                    wrapping="false"
                                    class="amount-field"
                                    textAlign="End"
                                    visible="{= ${ViewControl>/Mode/IsEditable} === false &amp;&amp; ${HierarchyLevel} !== 6 &amp;&amp; ${HierarchyLevel} !== 7}"
                                />
                                <Text 
                                    text="{ parts: ['CostToComplete', 'TransactionCurrency'], type: 'sap.ui.model.type.Currency'}" 
                                    wrapping="false"
                                    class="hierarchyLevel6 amount-field"
                                    textAlign="End"
                                    visible="{= ${HierarchyLevel} === 6}"
                                />
                                <Text 
                                    text="{ parts: ['CostToComplete', 'TransactionCurrency'], type: 'sap.ui.model.type.Currency'}" 
                                    wrapping="false"
                                    class="hierarchyLevel7 amount-field"
                                    textAlign="End"
                                    visible="{= ${HierarchyLevel} === 7}"
                                />
                                <Input
                                    value="{ parts: ['CostToComplete', 'TransactionCurrency'], type: 'sap.ui.model.type.Currency', formatOptions: {showMeasure: false}}"
                                    visible="{= ${ViewControl>/Mode/IsEditable} === true &amp;&amp; ${HierarchyLevel} !== 6 &amp;&amp; ${HierarchyLevel} !== 7}"
                                    width="auto"
                                    class="amount-field"
                                    textAlign="End"
                                    change=".onCurrencyInputChange"
                                />
                            </HBox>
                        </table:template>
                    </table:Column>
                    <table:Column width="10rem">
                        <table:label>
                            <Label
                                text="Projected Final Cost"
                                textAlign="Right"
                            />
                        </table:label>
                        <table:template>
                            <HBox justifyContent="End">
                                <Text 
                                    text="{ parts: ['ProjectedFinalCost', 'TransactionCurrency'], type: 'sap.ui.model.type.Currency'}" 
                                    wrapping="false"
                                    class="amount-field"
                                    textAlign="End"
                                    visible="{= ${HierarchyLevel} !== 6 &amp;&amp; ${HierarchyLevel} !== 7}"
                                />
                                <Text 
                                    text="{ parts: ['ProjectedFinalCost', 'TransactionCurrency'], type: 'sap.ui.model.type.Currency'}" 
                                    wrapping="false"
                                    class="hierarchyLevel6 amount-field"
                                    textAlign="End"
                                    visible="{= ${HierarchyLevel} === 6}"
                                />
                                <Text 
                                    text="{ parts: ['ProjectedFinalCost', 'TransactionCurrency'], type: 'sap.ui.model.type.Currency'}" 
                                    wrapping="false"
                                    class="hierarchyLevel7 amount-field"
                                    textAlign="End"
                                    visible="{= ${HierarchyLevel} === 7}"
                                />
                            </HBox>
                        </table:template>
                    </table:Column>
                    <table:Column width="10rem">
                        <table:label>
                            <Label
                                text="Variance"
                                textAlign="Right"
                            />
                        </table:label>
                        <table:template>
                            <HBox justifyContent="End">
                                <Text 
                                    text="{ parts: ['Variance', 'TransactionCurrency'], type: 'sap.ui.model.type.Currency'}" 
                                    wrapping="false"
                                    class="amount-field"
                                    textAlign="End"
                                    visible="{= ${HierarchyLevel} !== 6 &amp;&amp; ${HierarchyLevel} !== 7}"
                                />
                                <Text 
                                    text="{ parts: ['Variance', 'TransactionCurrency'], type: 'sap.ui.model.type.Currency'}" 
                                    wrapping="false"
                                    class="hierarchyLevel6 amount-field"
                                    textAlign="End"
                                    visible="{= ${HierarchyLevel} === 6}"
                                />
                                <Text 
                                    text="{ parts: ['Variance', 'TransactionCurrency'], type: 'sap.ui.model.type.Currency'}" 
                                    wrapping="false"
                                    class="hierarchyLevel7 amount-field"
                                    textAlign="End"
                                    visible="{= ${HierarchyLevel} === 7}"
                                />
                            </HBox>
                        </table:template>
                    </table:Column>
                    <table:Column width="12rem">
                        <table:label>
                            <Label
                                text="Remarks"
                                textAlign="Left"
                            />
                        </table:label>
                        <table:template>
                            <HBox visible="{= ${HierarchyLevel} !== 6 &amp;&amp; ${HierarchyLevel} !== 7}">
                                <Text 
                                    text="{Remarks}"
                                    wrapping="false"
                                    visible="{= ${ViewControl>/Mode/IsEditable} === false}"
                                />
                                <Input
                                    value="{Remarks}"
                                    visible="{= ${ViewControl>/Mode/IsEditable} === true}"
                                    width="auto"
                                    maxLength="255"
                                />
                            </HBox>
                        </table:template>
                    </table:Column>
                </table:columns>
            </table:Table>
            </VBox>
        </content>
        <buttons>
            <Button
                text="Refresh"
                icon="sap-icon://refresh"
                press=".onRefreshCostSummaryDialog"
            />
            <Button
                text="Close"
                press=".onCloseCostSummaryDialog"
            />
        </buttons>
    </Dialog>
</core:FragmentDefinition>
